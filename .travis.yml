language: node_js
sudo: false

node_js:
  - '--lts'

addons:
  chrome: stable

branches:
  only:
  - master

before_install:
  - # start your web application and listen on `localhost`
  - google-chrome-stable --headless --disable-gpu --remote-debugging-port=4200 http://localhost

install:
  - npm install

script:
  - ng build
  - gulp jigsaw:build-release:clean
  - ng test --code-coverage --watch false
  - ng e2e
  - cat ./coverage/lcov.info | ./node_modules/.bin/coveralls

